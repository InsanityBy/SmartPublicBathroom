# MCU电路设计  

## 修改历史  
|版本|日期|说明|作者|  
|----|----|----|----|  
|V1.0|2022年4月20日|创建MCU电路设计|綦浩楠、马博阳|  

## 设计需求  
1. 供电电压：3.3V或5V直流供电；  
2. 包含至少1个多通道ADC，支持数据采集；  
3. 至少4个16位定时器，支持PWM波形输出；  
4. 包含RTC支持实时日期时间；  
5. SPI、IIC通信接口、DMA；  
6. GPIO数量至少21个，最大能承受4V电压输入。  

## 器件选择  
STM32F401RE基于高性能ARM®Cortex®-M4 32位RISC内核，工作频率高达84 MHz。其Cortex®-M4内核具有单精度浮点单元（FPU），支持所有ARM单精度数据处理指令和数据类型。它还实现了一整套DSP指令和内存保护单元（MPU），增强了应用安全性。STM32F401RE集成了高速嵌入式存储器（512KB闪存、96KB SRAM），以及连接到两条APB总线、两条AHB总线和一个32位多AHB总线矩阵的大量增强型I/O和外设。所有器件都提供一个12位ADC、一个低功耗RTC、六个通用的16位定时器（包括一个用于电机控制的PWM定时器）、两个通用的32位定时器。具有标准和先进的通信接口。  
![MCU](../../../Image/MCU.png)  
- 1.7 V至3.6 V应用电源和I/O；  
- 1×12位，2.4 MSPS A/D转换器：多达16个通道；  
- 通用DMA：带有FIFO和突发支持的16流DMA控制器；  
- 11个定时器：6个16位、2个32位定时器，频率高达84 MHz，每个定时器有4个IC/OC/PWM或脉冲计数器和正交（增量）编码器输入，两个看门狗定时器（独立和窗口）和一个SysTick定时器；  
串行线调试（SWD）和JTAG接口；  
- 多达81个具有中断能力的I/O端口，多达78个快速I/O，频率高达42MHz；  
- 所有的I/O端口都是5V耐压的；  
- 多达12个通信接口；  
    - 多达3个IIC接口；  
    - 多达3个USART（2个10.5 Mbit/s，1个5.25 Mbit/s）；  
    - 多达4个SPI（在fCPU=84 MHz时高达42Mbit/s）；  
    - SDIO接口；  
    - 带有片上PHY的USB 2.0全速设备/主机/OTG控制器；  
- RTC：亚秒级精度，硬件日历。  

## 原理图设计  
MCU外围电路主要由电源、外部晶振、复位和调试器接口四部分组成。参照数据手册和原理图设计即可。  
![MCU_Schematic](../../../Image/MCU_Schematic.png)  
